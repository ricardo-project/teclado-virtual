<!DOCTYPE html>
<html>
    <head>
        <title>Teclado Virtual em JavaScript (Quatro oitavas)</title>
        <meta charset=UTF-8>
        <link rel="shortcut icon" type="image/x-icon" href="https://icons-for-free.com/iconfiles/png/512/device+keyboard+media+music+piano+technology+icon-1320161597661742164.png">
        <link rel=stylesheet type=text/css href="index.css">
        <link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto">
        <link rel=stylesheet href="https://fonts.googleapis.com/css?family=Raleway">
        <link rel=stylesheet href="https://fonts.googleapis.com/css?family=Gelasio">
    </head>
    <body onload="clickInpRadio()" onresize="alternwidPiano()">
        <section id=inicioPag>
            <p id=title>Teclado Virtual de Quatro Oitavas</p>
        </section>
        <main style="background-color: indianred; margin-top: -15px; padding-top: 7px; margin-left: -8px; padding-left: 8px; margin-right: -8px; margin-bottom: -30px; padding-bottom: 38px">
        <section id=backPiano>
            <article id=artcTop>
                <section class=conjOpt name=eletrcsect style="margin-left: 200px; display: none"><b>Configuração de onda</b> <input type=radio name=typeO1 checked=true onchange="typeOsc = 'sine'"> Senoidal <input type=radio name=typeO1 onchange="typeOsc = 'square'"> Quadrada <input type=radio name=typeO1 onchange="typeOsc = 'triangule'"> Triangular <input type=radio name=typeO1 onchange="typeOsc = 'sawtooth'"> Dente de Serra</section>
                <section class=conjOpt name=eletrcsect style="margin-left: 50px; margin-top: 70px; display: none"><b>Fade-out</b> <input type=radio name=typeEL onchange="expLinCond = false" checked=true> Exponencial <input type=radio name=typeEL onchange="expLinCond = true"> Linear </section>
                <section class=conjOpt id=fadvolsect><input type=text value=1.5 id=duration disabled> Duração Fade-out <input type=range id=duratrange min=0.5 max=5 step=.001 value=1.5 oninput="duratfadeout(false, value)"> Volume <input type=text value=1 id=volume1 disabled> <input type=range min=0 max=1 step=.001 id=rangeVol value=1 oninput="gainVol = value; volume1.value = value; audTSMGO.volume = value"></section>
            </article>
            <section style="background-color: grey; height: 360px; padding: 20px; border-radius: 40px; box-shadow: black 5px 5px 4px">
                <p><table>
                    <tr id=pianotec>
                        <!--Teclas brancas do piano-->
                    </tr>
                </table></p>
		        <p><table style="margin-left: 33.5px; margin-top: -365px">
		        	<tr id=pianotecB>
                        <!--Teclas pretas do piano-->
		        	</tr>
                </table></p>
            </section>
            <article style="height: 80px; margin-top: 10px">
                <section id=touchMe class=conjOpt style="padding-bottom: 15px"> <b id=titTouch>Toque para mim</b> <input type=text id=touchM list=optMusic> <img src="https://cdn3.iconfinder.com/data/icons/iconic-1/32/play_alt-512.png" onclick="touchMusic('touchM', musicList, sequencMusic, timeExec)" class=imgIcon> <img src="https://static.vecteezy.com/system/resources/previews/000/630/362/non_2x/trash-can-icon-symbol-illustration-vector.jpg" onclick="limparCampo('touchM')" class=imgIcon> </section><section class=conjOpt style="margin-top: 10px; margin-left: 570px"><b>Configuração de som</b> <input type=radio name=typeTec onchange="alternTypeSound(false)"> Eletrônico (via JavaScript) <input type=radio name=typeTec onchange="alternTypeSound(true)" checked=true> Convencional (via áudios pré-gravados - <b>Recomendado</b>)</section>
            </article>
            <section id=cronomt>00:00;00</section>
            <article style="position: absolute; margin-top: -158px; margin-left: 1200px; width: 400px; background-color: slategrey; filter: brightness(0.9); border-radius: 20px; text-align: center; padding-bottom: 20px; box-shadow: black 4px 4px 3px">
                <p style="font-family: Gelasio; font-size: 25px; text-shadow: black 4px 4px 3px; font-weight: bold; margin-top: 10px; margin-bottom: 6px">Crie sua própria composição!</p>
                <p style="display: inline"><span id=spanplay title="Gravar uma nova composição!"><img src="https://image.flaticon.com/icons/png/512/240/240784.png" id=imgPlay class=imgIcon onclick="if(isexec == true) { encerrarPlay(true) }; createComp()" onmouseover="mudarImg(true)" onmouseout="mudarImg(false)"></span><span title="Tocar uma música gravada!"><img src="https://www.pngkey.com/png/full/351-3512491_start-icon-copy.png" id=startcomp class=imgIcon style="display: none" onclick="touchMusic('compositprop', nomegrav, gravation, timeGrav)"></span><span title="Alterar nome de composição!"><img src="https://png.pngtree.com/svg/20150613/name_1004081.png" id=alternname class=imgIcon style="display: none" onclick="encerrarPlay(true); alternNameComp()"></span><span title="Baixar uma música gravada!" onclick="downlMusic(false)"><img src="https://pt.seaicons.com/wp-content/uploads/2015/11/download-2-icon.png" id=downlarch class=imgIcon style="display: none"></span><span title="Abrir música gravada em arquivo de texto!"><img src="https://www.freeiconspng.com/uploads/up-white-arrow-clip-art-3.png" id=uparch class=imgIcon onclick="findtxt.click()"></span><span title="Retornar!"><img src="https://simpleicon.com/wp-content/uploads/return_arrow.png" id=returnicon class=imgIcon style="display: none" onclick="returnFunct()"></span><span title="Limpar campo de entrada"><img src="https://static.vecteezy.com/system/resources/previews/000/630/362/non_2x/trash-can-icon-symbol-illustration-vector.jpg" id=trashcomp class=imgIcon onclick="limparCampo('compositprop'); if(startcomp.style.display == 'none') { downlarch.style.display = 'none' }" style="display: none"></span><span title="Abortar execução da gravação!" id=spandelet><img src="https://cdn.icon-icons.com/icons2/1154/PNG/512/1486564399-close_81512.png" id=deletarcomp class=imgIcon style="display: none" onclick="encerrarPlay(true); deletMusic(compositprop.value)"></span></p>
                <p style="margin-top: 25px; margin-bottom: -9px"><input type=text id=compositprop list=complist style="display: none" oninput="downlMusic(true)"></p>
            </article>
            <section id=musicSelect style="width: 500px; display: none">
                <img id=telaImg style="margin-top: -140px">
                <article style="position: absolute; margin-top: -140px; margin-left: 170px"><p id=titMus></p><p id=titArt></p></article>
                <img id=icondecimg class=imgsectMus>
                <span title="Encerrar execução da música!"><img src="https://www.iconninja.com/files/894/128/58/stop-line-control-play-pause-icon.svg" id=encPlayMus class=imgsectMus onclick="encerrarPlay(true)"></span>
            </section>
            <img src="https://icons.iconarchive.com/icons/designbolts/free-multimedia/512/Pause-icon.png" id=pausecomp onclick="encerrarPlay(true)">
            <article id=cifraM>
                <!--Cifra de cada música-->
            </article>
            <datalist id=optMusic>
                <!--Opções de músicas pré-selecionadas-->
            </datalist>
            <datalist id=complist>
                <!--Nome das composições gravadas-->
            </datalist>
        </section>
        <article id=artcSend>
            <img src="https://travelpedia.com.br/wp-content/uploads/2018/01/Music-icon.png" id=musicNota>
            <p id=pfrstSug>Se quiser mandar sugestões de músicas, envie:</p>
            <section class=sectSend>
                <p class=psectSend>augustogermani@hotmail</p>
                <img src="https://www.fametreinamentos.com.br/wp-content/uploads/2017/01/email-icon-23.png" style="margin-left: 400px; position: absolute" class=imgIcon>
            </section>
            <section class=sectSend style="margin-top: 20px">
                <p class=psectSend>pixelvfxgames001@gmail</p>
                <img src="https://www.fametreinamentos.com.br/wp-content/uploads/2017/01/email-icon-23.png" style="margin-left: 400px; position: absolute" class=imgIcon>
            </section>
            <section class=sectSend style="margin-top: 20px">
                <p class=psectSend>+55 54 8114-6851</p> <img src="https://cdn3.iconfinder.com/data/icons/social-media-chamfered-corner/154/whatsapp-512.png" style="margin-left: 400px; position: absolute" class=imgIcon>
            </section>
        </article>
        <a id=tagadownl style="display: none"></a>
        <input type=file accept="text/plain" id=findtxt style="display: none" onchange="txtverifMus(event)">
        </main>
        <footer>
            <span title="IFSul"><a href="http://passofundo.ifsul.edu.br/"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/25/Instituto_Federal_Sul-rio-grandense_-_Marca_Vertical_2015.svg/1200px-Instituto_Federal_Sul-rio-grandense_-_Marca_Vertical_2015.svg.png" class=imgfinal></a></span> <!--Instituto Federal Sul-Rio-Grandense-->
            <span title="HTML"><a href="https://html.com/"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/61/HTML5_logo_and_wordmark.svg/1200px-HTML5_logo_and_wordmark.svg.png" class=imgfinal></a></span> <!--HTML 5-->
            <span title="JavaScript"><a href="https://www.javascript.com/"><img src="http://luizricardo.org/wordpress/wp-content/upload-files/2014/11/js-logo-badge-512.png" class=imgfinal></a></span> <!--JavaScript-->
            <span title="CSS"><a href="https://www.w3schools.com/css/"><img src="https://logodownload.org/wp-content/uploads/2017/04/css-3-logo-1.png" class=imgfinal></a></span> <!--CSS 3-->
            <span title="W3School"><a href="https://www.w3schools.com/"><img src="https://i0.wp.com/amai-lab.com/wp-content/uploads/2017/12/W3Schools_logo1.png?fit=500%2C200&ssl=1" class=imgfinal></a></span> <!--W3School-->
        </footer>
    </body>
    <script type="text/javaScript">
        var conjKey;
        var caract;
        var musicList = new Array("Still D.R.E.", "Clocks", "The Show Must Go On", "Bohemian Rhapsody", "I Want To Break Free", "Imagine", "(I Can't Get No) Satisfaction", "Nemo", "Stairway To Heaven", "Seven Nation Army", "Believer", "Smoke on the Water", "Light My Fire", "Day Tripper", "Across The Universe", "Golden Slumbers", "Do I Wanna Know", "Let Her Go", "Come As You Are", "I'd Love to Change the World", "Até Quando Esperar", "Boombayah", "Música Desconhecida");
        var artistList = new Array("Dr. Dre (feat. Snoopy Dogg) - 2001 (1999)", "Coldplay - A Rush of Blood to the Head (2002)", "Queen - Innuendo (1991)", "Queen - A Night at the Opera (1975)", "Queen - The Works (1984)", "John Lennon - Imagine (1971)", "The Rolling Stones - Out of Our Heads (1965)", "Nightwish - Once (2004)", "Led Zeppelin - Led Zeppelin IV (1971)", "The White Stripes - Elephant (2003)", "Imagine Dragons - Evolve (2017)", "Deep Purple - Machine Head (1972)", "The Doors - The Doors (1967)", "The Beatles (1965)", "The Beatles - Let It Be (1970)", "The Beatles - Abbey Road (1969)", "Arctic Monkeys - AM (2013)", "Passenger - All The Little Lights (2012)", "Nirvana - Nevermind (1991)", "Ten Years After - A Space In Time (1971)", "Plebe Rude - O Concreto Já Rachou (1986)", "Blackpink - Blackpink (2017)", "Artista Desconhecido");
        if(/Chrome\/\d./i.test(navigator.userAgent)) {
            if(/Edge\/\d./i.test(navigator.userAgent)) {
                alert("Desculpe-nos, mas este programa não funciona ao ser exibido pelo Microsoft Edge... Favor, faça uso em outro navegador! =/");
            } else {
                usingValid = true;
                caract = "'1234567890-=QWERTYUIOP´[]ASDFGHJKL~\\ZXCVBNM,.;/";
                conjKey = new Array(192, 49, 50, 51, 52, 53, 54, 55, 56, 57, 48, 189, 187, 81, 87, 69, 82, 84, 89,  85, 73, 79, 80, 219, 221, 220, 65, 83, 68, 70, 71, 72, 74, 75, 76, 222, 226, 90, 88, 67, 86, 66, 78,  77, 188, 190, 191, 193);
            }
        } else {
            if(/Firefox\/\d./i.test(navigator.userAgent)) {
                usingValid = true;
                caract = "1234567890-=QWERTYUIOP´[]⇩ASDFGHJKL~↵\\ZXCVBNM,.;";
                conjKey = new Array(49, 50, 51, 52, 53, 54, 55, 56, 57, 48, 173, 61, 81, 87, 69, 82, 84, 89, 85, 73, 79, 80, 192, 219, 221, 20, 65, 83, 68, 70, 71, 72, 74, 75, 76, 176, 13, 220, 90, 88, 67, 86, 66, 78, 77, 188, 190, 59);
            }
        } /*--- Funcionamento do piano ---*/
        document.addEventListener("keydown", execPiano, false);
        document.addEventListener("keyup", execPianoout, false);
        var condFocus = false;
        document.getElementById("touchM").addEventListener("focus", function() {
            if(condFocus == false) {
                condFocus = true;
            }
        }); document.getElementById("touchM").addEventListener("blur", function() {
            if(condFocus == true) {
                condFocus = false;
            }
        }); document.getElementById("compositprop").addEventListener("focus", function() {
            if(condFocus == false) {
                condFocus = true;
            }
        }); document.getElementById("compositprop").addEventListener("blur", function() {
            if(condFocus == true) {
                condFocus = false;
            }
        }); alternwidPiano();
        function clickInpRadio() {
            var listinput = document.getElementsByTagName("INPUT");
            for(var j = 0; j < listinput.length; j++) {
                if(listinput[j].type == "radio") {
                    const inputname = listinput[j];
                    if(listinput[j].checked == true) {
                        listinput[j].style.backgroundColor = "slategrey";
                    } listinput[j].onclick = function() {
                        for(var k = 0; k < document.getElementsByName(inputname.name).length; k++) {
                            var inpnameele = document.getElementsByName(inputname.name)[k];
                            inpnameele.style.backgroundColor = "white";
                            inpnameele.checked = "false";
                        } inputname.style.backgroundColor = "slategrey";
                        inputname.checked = "true";
                    };
                }
            }
        } function alternwidPiano() {
            var widthBrowser;
            if(window.innerWidth <= 720) {
                widthBrowser = 720;
            } else if(window.innerWidth > 720) {
                widthBrowser = window.innerWidth;
            } backPiano.style.transform = "scale(" + Math.floor(1000*widthBrowser/1920)/1000 + ")";
            backPiano.style.marginLeft = 840*(widthBrowser/1920 - 1) + "px";
            backPiano.style.marginTop = 390*(widthBrowser/1920 - 1) + "px";
            title.style.fontSize = 80*(widthBrowser/1920) + "px";
        } function alternTypeSound(newcond) {
            soundCond = newcond;
            var displaycond;
            var artcalt;
            var mgtopsect;
            var pianoalt;
            if(newcond == false) {
                rangeVol.max = 5;
                displaycond = "block";
                artcalt = 135;
                mgtopsect = 65;
                pianoalt = 820;
            } else if(newcond == true) {
                if(rangeVol.value > 1) {
                    volume1.value = 1
                } rangeVol.max = 1;
                gainVol = rangeVol.value;
                displaycond = "none";
                artcalt = 80;
                mgtopsect = 10;
                pianoalt = 765;
            } var namesect = document.getElementsByName("eletrcsect");
            for(var o = 0; o < namesect.length; o++) {
                namesect[o].style.display = displaycond;
            } artcTop.style.height = artcalt + "px";
            fadvolsect.style.marginTop = mgtopsect + "px";
            backPiano.style.height = pianoalt + "px";
        } var notaConj = new Array("C", "D", "E", "F", "G", "A", "B");
        var relatNot = new Array(1, 9/8, 81/64, 4/3, 3/2, 27/16, 243/128);
        var freqSust = new Array(277.2, 311.1, 370, 415.3, 466.2);
        var freqList = new Array();
        var gainTime = 1.5; //---> Tempo de duração do fade-out
        var gainVol = 0.4; //---> Volume do áudio
        var typeOsc = "sine"; //---> Onda senoidal
        var audioint = new Array();
        var oscilador = new Array();
        var ganho = new Array();
        var condExec = new Array();
        for(var t = 0; t < conjKey.length; t++) {
            audioint.push();
            oscilador.push();
            ganho.push();
            condExec.push(false);
        } var expLinCond = false; //---> "False" quando for exponencial; "True" quando for linear;
        var soundCond = true; //---> "False" quando for eletrônico (JavaScript); "True" quando for convencional (áudios pré-gravados)
        var contNot = 0;
        var contFreqAdd = 0;
        var constExp;
		for(var j = 0; j <= 6; j++) {
			for(var h = 0; h < notaConj.length; h++) {
				var element = document.createElement("th");
				const lengt = h + notaConj.length*j;
				if(lengt % 2 == 0) {
					if(notaConj[contNot] !== "E" && notaConj[contNot] !== "B") {
                        element.id = "tecla" + freqList.length;
						element.style.width = "30px";
						element.className = "thclassB";
						element.innerHTML = notaConj[contNot] + "#<br><br>" + caract.charAt(freqList.length);
                        constExp = j/2 - 1;
                        addFreqB();
					} else {
						element.style.width = "39px";
						element.style.display = "block";
					} contNot++;
					if(contNot == notaConj.length) {
						contNot = 0;
					}
				} else {
					element.style.width = (8.35 - lengt*0.03) + "px";
				} document.getElementById("pianotecB").appendChild(element);
			}
		} for(var q = 0; q < 4; q++) {
            var element = document.createElement("th");
            if(q % 2 == 0) {
                element.style.width = "9.2px";
            } else if(q % 2 == 1) {
                element.style.width = "30px";
                element.className = "thclassB";
                element.id = "tecla" + freqList.length;
                if(q == 1) {
                    element.innerHTML = "G#";
                } else if(q == 3) {
                    element.innerHTML = "A#";
                } element.innerHTML += "<br><br>" + caract.charAt(freqList.length);
				constExp = 2;
                addFreqB();
            } document.getElementById("pianotecB").appendChild(element);
        } const addMore = freqList.length;
        function addFreqB() {
            freqList.push(Math.round(10*freqSust[contFreqAdd]*Math.pow(2, Math.floor(constExp)))/10);
            contFreqAdd++;
            if(contFreqAdd == freqSust.length) {
                contFreqAdd = 0;
            }
        } for(var c = 3; c <= 6; c++) {
            for(var q = 0; q < notaConj.length; q++) {
                var thEle = document.createElement("th");
                thEle.innerHTML = notaConj[q] + c + "<br><br>" + caract.charAt(freqList.length);
                thEle.className = "thclass";
                thEle.id = "tecla" + freqList.length;
                freqList.push(Math.round(16350*Math.pow(2, c)*relatNot[q])/1000);
                document.getElementById("pianotec").appendChild(thEle);
            }
        } function createSound(identnota) {
            if(soundCond == false) { //---> Teclado Eletrônico
                audioint[identnota] = new AudioContext();
                oscilador[identnota] = audioint[identnota].createOscillator();
                ganho[identnota] = audioint[identnota].createGain();
                ganho[identnota].connect(audioint[identnota].destination);
                oscilador[identnota].connect(ganho[identnota]);
                oscilador[identnota].type = typeOsc;
                ganho[identnota].gain.value = gainVol;
                oscilador[identnota].frequency.value = freqList[identnota];
                oscilador[identnota].start(0);
                oscilador[identnota].stop(gainTime);
                if(expLinCond == false) {
                    ganho[identnota].gain.exponentialRampToValueAtTime(0.00001, gainTime);
                } else if(expLinCond == true) {
                    ganho[identnota].gain.linearRampToValueAtTime(0.00001, gainTime);
                }
            } else if(soundCond == true) { //---> Teclado Convencional
                audioint[identnota] = new Audio("Pack Notas Musicais/" + identnota + ".mp3");
                audioint[identnota].volume = gainVol;
                audioint[identnota].playbackRate = 1/gainTime;
                audioint[identnota].play();
            }
        } function execPiano(event) {
            if(condFocus == false) { //---> Quando não estiver focado no campo de opções de música!
                for(var a = 0; a < conjKey.length; a++) {
                    if(event.keyCode == conjKey[a] && usingValid == true && event.key.toUpperCase() !== "Ç") {
                        if(condExec[a] == false) {
							createSound(a);
                            if(execCompCond == true) {
                                gravation[gravation.length - 1].push(a);
                                timeGrav[timeGrav.length - 1].push(min*60000 + seg*1000 + deciseg*10);
                            } var teclapress = document.getElementById("tecla" + a);
                            if(a >= addMore) {
                                teclapress.style.borderColor = "orangered";
                                teclapress.style.backgroundColor = "slategrey";
                                teclapress.style.color = "khaki";
                            } else if(a < addMore) {
                                teclapress.style.borderColor = "red";
                                teclapress.style.backgroundColor = "grey";
                                teclapress.style.color = "black";
                            } teclapress.style.borderBottomWidth = "0px";
                            condExec[a] = true;
                        }
                    }
                }
            }
        } function execPianoout(event) {
            if(condFocus == false) { //---> Quando não estiver focado no campo de opções de música!
                for(var a = 0; a < conjKey.length; a++) {
                    if(event.keyCode == conjKey[a] && usingValid == true && event.key.toUpperCase() !== "Ç") {
                        condExec[a] = false;
                        var teclapress = document.getElementById("tecla" + a);
                        if(a >= addMore) {
                            teclapress.style.borderColor = "saddlebrown";
                            teclapress.style.backgroundColor = "silver";
                            teclapress.style.color = "white";
                            teclapress.style.borderBottomWidth = "8px";
                        } else if(a < addMore) {
                            teclapress.style.borderColor = "sandybrown";
                            teclapress.style.backgroundColor = "black";
                            teclapress.style.color = "white";
                            teclapress.style.borderBottomWidth = "5px";
                        }
                    }
                }
            }
        } for(var t = 0; t < musicList.length; t++) {
            var optEle = document.createElement("option");
            optEle.value = musicList[t];
            if(/Firefox\/\d./i.test(navigator.userAgent)) {
                optEle.label = musicList[t] + " [" + artistList[t] + "]";
            } else {
                optEle.label = artistList[t];
            } document.getElementById("optMusic").appendChild(optEle);
        } var fadeoutExec = new Array(0.5, 1.3, 0.5, 1.75, 1.55, 2.1, 1.25, 1.7, 1.9, 1.6, 1.2, 1.3, 1.5, 1.2, 1.75, 2, 1.45, 1.5, 1.6, 1.3, 1.25, 1.8, 1.3); //---> Fade-out exclusivo para cada música
        var timeExec = new Array(); //---> Tempo de execução de cada nota a partir do início
			timeExec[0] = new Array(); //---> Still D.R.E.
			timeExec[1] = new Array(); //---> Clocks
			timeExec[2] = new Array(); //---> The Show Must Go On
            timeExec[3] = new Array(0, 520, 990, 1460, 1800, 2790, 3680, 4130, 4600, 5070, 5530, 6380, 7240, 7690, 8150, 8580, 9000, 9850); //---> Bohemian Rhapsody
            timeExec[4] = new Array(0, 290, 660, 1080, 1360, 1660, 2920, 3520, 4330, 4660, 5040, 5470, 5730, 6020, 7390, 7920, 8740, 9060, 9460, 9840, 10160, 10530, 10960, 11260, 11620, 11800, 12060, 12350, 12640, 13080, 13330, 13770, 13930, 14160, 14560, 15340, 15520, 15660, 16190, 16700, 17560, 17820, 18230, 18430, 18640, 18900); //---> I Want To Break Free
			timeExec[5] = new Array(0, 370, 730, 1110, 1480, 1880, 2240, 2650, 3020, 3420, 3800, 4190, 4590, 4990, 5360, 5540, 5750, 6170); //---> Imagine
			timeExec[6] = new Array(0, 440, 1090, 1280, 1490, 2150, 2350, 2550, 2740, 2940, 3160, 3520, 4140, 4310, 4530, 5290, 5480, 5680, 5890, 6070, 6300); //---> (I Can't Get No) Satisfaction
			timeExec[7] = new Array(0, 460, 700, 930, 1170, 1910, 2370, 2630, 2840, 3120, 3790, 4260, 4490, 4700, 4980, 5480, 5940, 6410, 6860, 7550, 7990, 8240, 8440, 8700, 9380, 9850, 10080, 10300, 10580, 11280, 11740, 11970, 12180, 12450, 12930, 13380, 13850, 14300); //---> Nemo
			timeExec[8] = new Array(0, 400, 840, 1310, 1700, 2150, 2600, 3040, 3480, 3890, 4360, 4790, 5230, 5680, 6130, 6570, 7010, 7430, 7870, 8300, 9130, 9570, 9980, 10400, 10850, 11250); //---> Stairway to Heaven
			timeExec[9] = new Array(0, 780, 1040, 1410, 1740, 2030, 2980, 3910, 4580, 4840, 5160, 5490, 5820, 6170, 6470, 6780, 7780, 8450, 8730, 9100, 9420, 9690, 10630, 11550, 12190, 12480, 12790, 13080, 13410, 13730, 14030, 14330); //---> Seven Nation Army
            timeExec[10] = new Array(); //---> Believer
			timeExec[11] = new Array(0, 610, 1190, 2110, 2660, 3170, 3440, 4550, 5080, 5660, 6500, 7010, 8970, 9510, 10000, 10790, 11310, 11830, 12070, 13130, 13680, 14220, 15040, 15540); //---> Smoke on the Water
            timeExec[12] = new Array(0, 230, 390, 540, 880, 1180, 1470, 1730, 2030, 2340, 2610, 2750, 2910, 3210, 3550, 3690, 3810, 3960, 4120, 4460, 4770, 5060, 5220, 5360, 5660, 5970, 6290, 6600, 6900, 7210); //---> Light My Fire
            timeExec[13] = new Array(0, 630, 860, 1050, 1260, 1480, 2130, 2340, 2770, 2970, 3180, 3410, 4070, 4270, 4470, 4700, 4920, 5580, 5790, 6240, 6430, 6650, 6880, 7500, 7690, 7900, 8130, 8360, 8970, 9190, 9640, 9830, 10040, 10290, 10920, 11130, 11340, 11550, 11780, 12450, 12660, 13090, 13280, 13500); //---> Day Tripper
            timeExec[14] = new Array(0, 400, 800, 1190, 1610, 2030, 2430, 2830, 3260, 3640, 4040, 4450, 4860, 5260, 5660, 6040, 6460, 6870, 7270, 7700, 8100, 8510, 8900, 9300); //---> Across The Universe
            timeExec[15] = new Array(); //---> Golden Slumbers
            timeExec[16] = new Array(0, 230, 370, 760, 2250, 2460, 2600, 2940, 3280, 4210, 4570, 5200, 5880, 6120, 6240, 7400, 7580, 7740, 8110, 8480, 10230, 10480, 10600, 11000); //---> Do I Wanna Know
            timeExec[17] = new Array(0, 220, 410, 620, 840, 1040, 1270, 1810, 2200, 3260, 3470, 3700, 3930, 4150, 4350, 4590, 5140, 5360, 5820, 6650, 6860, 7090, 7300, 7510, 7720, 7950, 8530, 8920, 9160, 9380, 9930, 10180, 10590); //---> Let Her Go
            timeExec[18] = new Array(0, 260, 500, 750, 1280, 1520, 1770, 2030, 2280, 2520, 2790, 3060, 3310, 3560, 4070, 4350, 4590, 4840, 5360, 5640, 5860, 6120, 6360, 6620, 6880, 7130, 7390, 7640, 8140, 8400, 8630, 8890); //---> Come As You Are
            timeExec[19] = new Array(); //---> I'd Love to Change the World
			timeExec[20] = new Array(0, 1020, 1390, 1990, 2600, 3840, 4780, 5100, 5560, 5980, 6350, 6800, 7230, 7590, 9710, 10080, 10580, 11040, 11400, 12080, 12700, 13990, 14970, 15300, 15770, 16210, 16560, 17040, 17490, 17830); //---> Até Quando Esperar
            timeExec[21] = new Array(0, 480, 970, 1320, 1690, 1950, 2450, 2930, 3290, 3650, 3920, 4400, 4880, 5230, 5600, 5840, 6360, 6830, 7180, 7520, 7790, 8310, 8780, 9120, 9490, 9750, 10200, 10640, 10990, 11350, 11600, 12090, 12570, 12920, 13300, 13540, 14040, 14520, 14880, 15240, 15510); //---> Boombayah
		    timeExec[22] = new Array(0, 340, 670, 1030, 1710, 2060, 3080); //---> Música Desconhecida
		var sequencMusic = new Array(); //---> Sequência de notas de cada música
			sequencMusic[0] = new Array([34, 36, 39], [34, 36, 39], [34, 36, 39], [34, 36, 39], [34, 36, 39], [34, 36, 39], [34, 36, 39], [34, 36, 39], [33, 36, 39], [33, 36, 39], [33, 36, 39], [33, 36, 38], [33, 36, 38], [33, 36, 38], [33, 36, 38], [33, 36, 38], [34, 36, 39], [34, 36, 39], [34, 36, 39], [34, 36, 39], [34, 36, 39], [34, 36, 39], [34, 36, 39], [34, 36, 39], [33, 36, 39], [33, 36, 39], [33, 36, 39], [33, 36, 38], [33, 36, 38], [33, 36, 38], [33, 36, 38], [33, 36, 38]); //---> Still D.R.E.
			sequencMusic[1] = new Array([11], [9], [31], [11], [9], [31], [11], [9], [10], [9], [30], [10], [9], [30], [10], [9], [10], [9], [30], [10], [9], [30], [10], [9], [34], [8], [30], [34], [8], [30], [34], [8], /**/[4, 6, 11], [9], [31], [4, 6, 11], [9], [31], [4, 6, 11], [9], [4, 5, 10], [9], [30], [4, 5, 10], [9], [30], [4, 5, 10], [9], [4, 5, 10], [9], [30], [4, 5, 10], [9], [30], [4, 5, 10], [9], [3, 27, 34], [8], [30], [3, 27, 34], [8], [30], [3, 27, 34], [8]); //---> Clocks
			sequencMusic[2] = new Array([26, 28, 7], [26, 28, 7], [26, 28, 7], [26, 28, 7], [26, 5, 28, 7], [26, 5, 28, 7], [26, 5, 28, 7], [26, 5, 28, 7], [26, 28, 29, 7], [26, 28, 29, 7], [26, 28, 29, 7], [26, 28, 29, 7], [26, 28, 7], [26, 28, 7], [26, 28, 7], [26, 28, 7], [24, 26, 28], [24, 26, 28], [24, 26, 28], [24, 26, 28], [24, 26, 5, 28], [24, 26, 5, 28], [24, 26, 5, 28], [24, 26, 5, 28], [24, 26, 28, 29], [24, 26, 28, 29], [24, 26, 28, 29], [24, 26, 28, 29], [24, 26, 28], [24, 26, 28], [24, 26, 28], [24, 26, 28], [22, 24, 26], [22, 24, 26], [22, 24, 26], [22, 24, 26], [22, 24, 26], [22, 24, 26], [22, 24, 26], [22, 24, 26], [2, 4, 5], [2, 4, 5], [2, 4, 5], [2, 4, 5], [2, 4, 5], [2, 4, 5], [2, 4, 5], [2, 4, 5]); //---> The Show Must Go On
            sequencMusic[3] = new Array([20], [23], [26], [28], [24, 31], [23, 30], [20], [23], [26], [28], [24, 31], [23, 30], [21], [23], [26], [28], [25, 32], [24, 31]); //---> Bohemian Rhapsody
            sequencMusic[4] = new Array([26], [29], [7], [7], [22, 3, 7], [8], [22, 3], [22, 3], [26], [29], [7], [32], [22, 3], [8], [22, 3], [22, 3], [26], [29], [7], [7], [22, 3, 32], [8], [7], [32], [8], [22, 3], [7], [22, 3], [32], [8], [7], [32], [8], [7], [21, 2, 7], [8], [7], [0, 22, 29], [5], [0, 22], [7], [7], [29], [0, 22], [5], [22, 3, 26]); //---> I Want To Break Free
			sequencMusic[5] = new Array([22, 24], [20], [22, 24], [20], [22, 24], [20], [24, 26], [20], [23, 25], [20], [23, 25], [20], [23, 25], [20], [25], [4], [26], [22, 24]); //---> Imagine
			sequencMusic[6] = new Array([26], [26], [26], [5], [28], [28], [28], [5], [5], [5], [26], [26], [26], [5], [28], [28], [28], [5], [28], [5], [26]); //---> (I Can't Get No) Satisfaction
			sequencMusic[7] = new Array([35], [35], [34], [35], [32], [35], [35], [34], [35], [30], [34], [34], [35], [32], [31], [30], [29], [27], [28], [35], [35], [34], [35], [32], [35], [35], [34], [35], [30], [34], [34], [35], [32], [31], [30], [29], [27], [28]); //---> Nemo
			sequencMusic[8] = new Array([25], [27], [29], [32], [33], [29], [27], [33], [34], [29], [27], [34], [7], [28], [25], [7], [29], [27], [25], [27], [29], [27], [25], [24], [25], [25]); //---> Stairway to Heaven
			sequencMusic[9] = new Array([29], [29], [31], [29], [28], [27], [26], [29], [29], [31], [29], [28], [27], [28], [27], [26], [29], [29], [31], [29], [28], [27], [26], [29], [29], [31], [29], [28], [27], [28], [27], [26]); //---> Seven Nation Army
			sequencMusic[10] = new Array([25, 32], [27], [25, 36], [27], [25, 35], [27], [25, 35], [27, 34], [25, 35], [27], [25, 35], [27, 36], [25, 35], [27, 34], [25, 32], [27, 31], [23, 32], [27], [23, 36], [27], [23, 35], [27], [23, 35], [27, 34], [3, 35], [26], [3, 35], [26, 36], [3, 35], [26, 34], [3, 32], [26, 31], [25, 32], [27], [25, 34], [27], [25, 39], [27], [25], [27], [25, 36], [27], [25], [27, 36], [25, 35], [27, 34], [25, 32], [27, 31], [23, 32], [27], [23, 34], [27], [23, 39], [27], [23], [27], [3, 37], [26], [3], [26], [3], [26], [3], [26]); //---> Believer
			sequencMusic[11] = new Array([28, 31], [30, 9], [31, 34], [28, 31], [30, 9], [8, 10], [31, 34], [28, 31], [30, 9], [31, 34], [30, 9], [28, 31], [28, 31], [30, 9], [31, 34], [28, 31], [30, 9], [8, 10], [31, 34], [28, 31], [30, 9], [31, 34], [30, 9], [28, 31]); //---> Smoke on the Water
            sequencMusic[12] = new Array([33], [31], [32], [33], [35], [34], [33], [32], [31], [32], [30], [32], [34], [37], [35], [34], [9], [31], [9], [31], [9], [30], [31], [32], [34], [33], [32], [29], [30], [32]); //---> Light My Fire
            sequencMusic[13] = new Array([22], [22], [24], [3], [29], [28], [26], [7], [26], [28], [29], [22], [22], [24], [3], [29], [28], [26], [7], [26], [28], [29], [22], [22], [24], [3], [29], [28], [26], [7], [26], [28], [29], [22], [22], [24], [3], [29], [28], [26], [7], [26], [28], [29]); //---> Day Tripper
            sequencMusic[14] = new Array([25, 7], [28], [7, 35], [28], [29, 10], [28, 33], [5, 32], [7], [2, 25], [2, 26], [2, 25], [2, 26], [2, 25], [2, 26], [2, 25], [2, 26], [22, 25], [22, 26], [22, 25], [22, 26], [22, 25], [22, 26], [22, 25], [22, 26]); //---> Across The Universe
            sequencMusic[15] = new Array([27, 31], [25], [27, 31], [25], [27, 31], [25], [27, 31], [25], [27, 31], [25], [27, 31], [25], [27, 31], [25], [27, 31], [25], [28, 30], [25], [28, 30], [25], [29, 31], [25], [29, 31], [25], [30, 32], [25], [30, 32], [25], [29, 31], [25], [28, 30], [25], [26, 30]); //---> Golden Slumbers
            sequencMusic[16] = new Array([23], [24], [4], [24], [23], [24], [4], [30], [6], [28], [27], [4], [27], [28], [27], [4], [27], [28], [28], [24], [23], [24], [4], [24]); //---> Do I Wanna Know
            sequencMusic[17] = new Array([32], [33], [32], [31], [28], [29], [31], [29], [33], [32], [33], [32], [31], [28], [29], [31], [29], [33], [32], [32], [33], [32], [31], [28], [29], [31], [29], [31], [35], [33], [31], [32], [33]); //---> Let Her Go
            sequencMusic[18] = new Array([1], [1], [22], [23], [3], [23], [3], [23], [23], [22], [1], [4], [1], [1], [4], [1], [22], [23], [3], [23], [3], [23], [23], [22], [1], [4], [1], [1], [4], [1], [22], [23]); //---> Come As You Are
            sequencMusic[19] = new Array([22], [26], [29], [31], [22], [23], [2], [24], [26], [28], [31], [38], [33], [31], [28], [24], [25], [29], [32], [34], [25], [4], [26], [27], [29], [31], [34], [31], [26], [6], [32], [33], [22], [26], [29], [31], [22], [23], [2], [24], [26], [28], [31], [38], [33], [31], [28], [24], [25], [29], [32], [34], [25], [4], [26], [27], [29], [31], [34], [31], [26], [6], [32], [33]); //---> I'd Love to Change the World
			sequencMusic[20] = new Array([32], [33], [34], [36], [35], [32], [33], [34], [33], [32], [31], [30], [29], [28], [33], [32], [32], [33], [34], [36], [35], [32], [33], [34], [33], [32], [31], [30], [29], [28]); //---> Até Quando Esperar
            sequencMusic[21] = new Array([30], [30], [30], [7], [6], [30], [30], [8], [31], [9], [30], [30], [30], [7], [6], [30], [30], [6], [6], [29], [30], [30], [30], [7], [6], [30], [30], [8], [31], [9], [30], [30], [30], [7], [6], [30], [30], [6], [6], [29], [30]); //---> Boombayah
            sequencMusic[22] = new Array([36], [35], [34], [35], [32], [34], [41]); //---> Música Desconhecida
        var icondecade = new Array("https://pngimage.net/wp-content/uploads/2018/05/anni-60-png-1.png", "https://i.ya-webdesign.com/images/music-png-tumblr-5.png", "https://pngimage.net/wp-content/uploads/2018/05/a%C3%B1os-80-png-1.png", "https://i.ya-webdesign.com/images/png-music-hits-download-3.png", "https://lh3.googleusercontent.com/5UWuX9yOhT1Zi-Ypg32_ufw1jSLu6r_OjdcXD32X52naF-rexsGVpXjOKTVYXqZDyEpz", "https://image.flaticon.com/icons/png/512/1987/1987997.png"); //---> Ícone de cada década dentre 1960's - 2010's
		var conjInterv = new Array(0, 1, 2, 10, 15, 19);
        var interv = new Array(320, 220, 330, 290, 400, 230);
		for(var j = 0; j < conjInterv.length; j++) {
			for(var t = 0; t < sequencMusic[conjInterv[j]].length; t++) {
				timeExec[conjInterv[j]].push(interv[j]*t);
                if(conjInterv[j] == 10) {
                    timeExec[conjInterv[j]][t] -= 135*Math.floor(t/2);
                }
			}
		} var setIntRel;
        var audTSMGO;
        var intervNota = new Array();
        var isexec = false;
        var timeAnt;
        const hifentagb = " <b class=bClass style='color: orange'>-</b> ";
        function duratfadeout(newcond, valor) {
            gainTime = valor;
            duration.value = valor;
            if(newcond == true) {
                duratrange.value = valor;
            }
        } function teclareturn(newcond, conjref, newcond2) {
            var tecla;
            for(var k = 0; k < conjref; k++) {
                var teclanum = k;
                if(newcond == false) {
                    teclanum = timeAnt[k];
                } tecla = document.getElementById("tecla" + teclanum);
                if(teclanum >= addMore) {
                    tecla.style.backgroundColor = "silver";
                    tecla.style.borderColor = "saddlebrown";
                    tecla.style.borderBottomWidth = "8px";
                } else if(teclanum < addMore) {
                    tecla.style.backgroundColor = "black";
                    tecla.style.borderColor = "sandybrown";
                    tecla.style.borderBottomWidth = "5px";
                } tecla.style.color = "white";
            } if(newcond2 == true) {
                telaImg.src = "";
                musicSelect.style.display = "none";
                cifraM.style.display = "none";
                pausecomp.style.display = "none";
                isexec = false;
            }
        } function encerrarPlay(newcond) {
            for(var h = 0; h < intervNota.length; h++) {
                clearTimeout(intervNota[h]);
            } teclareturn(true, conjKey.length, false);
            if(newcond == true) {
                telaImg.src = "";
                musicSelect.style.display = "none";
                cifraM.style.display = "none";
                pausecomp.style.display = "none";
                isexec = false;
            }
        } function indictecla(positnota, indicarnota) {
            var tecla = document.getElementById("tecla" + positnota);
            if(positnota >= addMore) {
				tecla.style.backgroundColor = "slategrey";
				tecla.style.borderColor = "orangered";
				tecla.style.color = "khaki";
			} else if(positnota < addMore) {
				tecla.style.backgroundColor = "grey";
				tecla.style.borderColor = "red";
				tecla.style.color = "black";
			} tecla.style.borderBottomWidth = "0px";
            document.getElementById(indicarnota).style.color = "tomato";
			timeAnt.push(positnota);
        } function touchMusic(newid, listaComp, sequencNota, timeexecNota) {
            var condMusic = false;
            telaImg.src = "";
            musicSelect.style.display = "none";
            cifraM.style.display = "none";
            pausecomp.style.display = "none";
            if(isexec == true) {
                encerrarPlay(false);
            } intervNota = new Array();
            for(var h = 0; h < listaComp.length; h++) {
                var itemComp = listaComp[h];
                if((document.getElementById(newid).value).toUpperCase() == itemComp.toUpperCase()) {
                    function addNotaArticle(position, idtagb, varact, lengthconjref) {
                        if(position >= addMore) {
                            document.getElementById("cifraM").innerHTML += "<b class=bClass id=" + idtagb + ">" + notaConj[(position - 20) % 7] + Math.floor((position + 1)/7) + "</b>";
                        } else if(position < addMore) {
                            document.getElementById("cifraM").innerHTML += "<b class=bClass id=" + idtagb + ">" + notaConj[(position % 5) + Math.floor(((position % 5) + 2)/4)] + "#" + (Math.floor(position/5) + 3) + "</b>";
                        } if(varact < lengthconjref) {
                            document.getElementById("cifraM").innerHTML += " ";
                        }
                    } if(newid == "touchM") {
                        duratfadeout(true, fadeoutExec[h]);
                        if(h !== listaComp.length - 1) {
                            icondecimg.src = icondecade[Math.floor(parseFloat(artistList[h].substr(artistList[h].length - 5, 4))/10 - 0.1) - 196];
                        } else if(h == listaComp.length - 1) {
                            icondecimg.src = "https://pngimage.net/wp-content/uploads/2018/06/ponto-de-interroga%C3%A7%C3%A3o-animado-png-1.png";
                        } if(h == 2) { //---> The Show Must Go On
                            intervNota.push(setTimeout(function() {
                                audTSMGO = new Audio("The Show Must Go On.mp3");
                                audTSMGO.volume = gainVol;
                                audTSMGO.play();
                            }, timeExec[2][timeExec[2].length - 1] + 2000));
                        } document.getElementById("telaImg").src = "Imagens/" + itemComp + ".jpg";
                        document.getElementById("titMus").textContent = itemComp;
                        document.getElementById("titArt").textContent = artistList[h];
                        document.getElementById("musicSelect").style.display = "block";
                    } else if(newid == "compositprop") {
                        pausecomp.style.display = "block";
                    } if(isexec == false) {
                        isexec = true;
                    } cifraM.innerHTML = "";
                    cifraM.style.display = "block";
                    condMusic = true;
                    for(var k = 0; k < sequencNota[h].length; k++) {
                        const timeConst = timeexecNota[h][k];
		    		    if(k > 0) {
                            intervNota.push(setTimeout(function() {
		    		    		teclareturn(false, timeAnt.length, false);
		    		    	}, (timeConst + 1000)));
		    		    } timeAnt = new Array();
		    		    for(var r = 0; r < sequencNota[h][k].length; r++) {
		    		    	const positConst = sequencNota[h][k][r];
                            const idNota = "notac" + r + "l" + k;
                            addNotaArticle(positConst, idNota, r, (sequencNota[h][k].length - 1));
                            intervNota.push(setTimeout(function() {
                                createSound(positConst);
                                indictecla(positConst, idNota);
                            }, (timeConst + 1000)));
						} if(k == sequencNota[h].length - 1) {
							intervNota.push(setTimeout(function() {
                                teclareturn(false, timeAnt.length, true);
							}, (timeConst + 1500)));
						} if(k < sequencNota[h].length - 1) {
                            cifraM.innerHTML += hifentagb;
                        }
					} break;
                }
            } if(condMusic == false) {
                alert("Valor inserido não válido! Verifique as opções disponíveis!");
            } document.getElementById(newid).value = "";
            document.getElementById(newid).focus();
        } var condupload = false;
        var importcomp;
        var condconfTVM = false;
        var timeNota;
        var allSeqNota;
        function txtverifMus(event) {
            var leitor = new FileReader();
            leitor.onload = function(event) {
                var conjmaintxt = new String(event.target.result).split(";"); //---> Primeiro valor: nome; Segundo valor: Tempo de execução de cada nota; Terceiro valor: Nota tocada em cada intervalo!
                var condmain = true;
                if(conjmaintxt.length == 3) {
                    for(var c = 1; c <= 2; c++) {
                        for(var j = 0; j < conjmaintxt[c].length; j++) {
                            var reprcaractnum = false;
                            for(var k = 0; k <= 9; k++) {
                                if(conjmaintxt[c].charAt(j) == k) {
                                    reprcaractnum = true;
                                }
                            } if(conjmaintxt[c].charAt(j) !== "," && reprcaractnum == false) {
                                if(c == 1 || (c == 2 && conjmaintxt[c].charAt(j) !== "-")) {
                                    condmain = false;
                                    break;
                                }
                            }
                        }
                    } const mensfinal = ". Favor, corrigir este erro no editor de texto!";
                    if(condmain == true) {
                        timeNota = conjmaintxt[1].split(","); //---> Tempo de execução de cada nota
                        var execNota = conjmaintxt[2].split("-"); //---> Cada conjunto de notas que serão executadas
                        if(timeNota.length !== execNota.length) {
                            alert("A quantidade de conjuntos de notas não equivale a quantidade de tempos de execução para cada uma delas" + mensfinal);
                        } else if(timeNota.length == execNota.length) {
                            const mensagem1 = "A ordem dos tempos de execuções de notas devem apresentar-se de forma crescente, e não devem ser consecutivamente iguais";
                            const mensagem2 = "O nosso algoritmo não reconheceu, pelo menos, um dos valores relacionados à nota que será executada";
                            const mensagem3 = "Há, pelo menos, duas notas semelhantes em um conjunto de notas";
                            var condmainfinal = true;
                            allSeqNota = new Array();
                            for(var u = 0; u < timeNota.length; u++) {
                                if(u > 0 && parseFloat(timeNota[u - 1]) >= parseFloat(timeNota[u])) {
                                    if(condmainfinal == true) {
                                        condmainfinal = false;
                                    } else if(condmainfinal == 2) {
                                        condmainfinal = 4;
                                    } else if(condmainfinal == 3) {
                                        condmainfinal = 5;
                                    } else if(condmainfinal == 6) {
                                        condmainfinal = 7;
                                    }
                                } var conjnota = execNota[u].split(",");
                                for(var q = 0; q < conjnota.length; q++) {
                                    conjnota[q] = parseFloat(conjnota[q]);
                                    if(isNaN(conjnota[q]) == true || conjnota[q] >= conjKey.length) {
                                        if(condmainfinal == true) {
                                            condmainfinal = 2;
                                        } else if(condmainfinal == false) {
                                            condmainfinal = 4;
                                        } else if(condmainfinal == 3) {
                                            condmainfinal = 6;
                                        } else if(condmainfinal == 5) {
                                            condmainfinal = 7;
                                        }
                                    } for(var t = 0; t < conjnota.length; t++) {
                                        if(t !== q && parseFloat(conjnota[q]) == parseFloat(conjnota[t])) {
                                            if(condmainfinal == true) {
                                                condmainfinal = 3;
                                            } else if(condmainfinal == false) {
                                                condmainfinal = 5;
                                            } else if(condmainfinal == 2) {
                                                condmainfinal = 6;
                                            } else if(condmainfinal == 4) {
                                                condmainfinal = 7;
                                            } break;
                                        }
                                    }
                                } allSeqNota.push(conjnota);
                            } if(condmainfinal == true) {
                                verifNameComp(conjmaintxt[0], true);
                            } else if(condmainfinal !== true) {
                                var menstotal;
                                if(condmainfinal == false) {
                                    menstotal = mensagem1;
                                } else if(condmainfinal == 2) {
                                    menstotal = mensagem2;
                                } else if(condmainfinal == 3) {
                                    menstotal = mensagem3;
                                } else if(condmainfinal == 4) {
                                    menstotal = mensagem1 + ", assim como " + mensagem2.toLowerCase();
                                } else if(condmainfinal == 5) {
                                    menstotal = mensagem1 + ", assim como " + mensagem3.toLowerCase();
                                } else if(condmainfinal == 6) {
                                    menstotal = mensagem2 + " e " + mensagem3.toLowerCase();
                                } else if(condmainfinal == 7) {
                                    menstotal = mensagem1 + ", assim como " + mensagem2.toLowerCase() + " e " + mensagem3.toLowerCase();
                                } alert(menstotal + mensfinal);
                            }
                        }
                    }
                } else if(conjmaintxt.length !== 3) {
                    condmain = false;
                } if(condmain == false) {
                    alert("Nosso algoritmo não é capaz de reproduzir o conteúdo deste arquivo de texto em música no Teclado Virtual. Favor, modifique o conteúdo interno do respectivo arquivo selecionado, ou simplesmente escolha outro arquivo de texto!");
                }
            }; leitor.readAsText(event.target.files[0]);
        } function downlMusic(condupl) {
            function identcomp() {
                for(var v = 0; v < nomegrav.length; v++) {
                    if(compositprop.value.toUpperCase() == nomegrav[v].toUpperCase()) {
                        var sequenc = "";
                        for(var k = 0; k < gravation[v].length; k++) {
                            sequenc += new String(gravation[v][k]);
                            if(k !== gravation[v].length - 1) {
                                sequenc += "-";
                            }
                        } tagadownl.href = URL.createObjectURL(new Blob([nomegrav[v] + ";" + new String(timeGrav[v]) + ";" + sequenc], {type: "text/plain"}));
                        tagadownl.download = nomegrav[v] + ".txt";
                        downlarch.style.display = "inline";
                        break;
                    }
                }
            } if(condupload == false && condupl == false) {
                condupload = true;
                imgPlay.style.display = "none";
                startcomp.style.display = "none";
                downlarch.style.display = "none";
                uparch.style.display = "none";
                deletarcomp.style.display = "none";
                alternname.style.display = "none";
                returnicon.style.display = "inline";
                identcomp();
            } else if(condupload == true) {
                if(condupl == false) {
                    tagadownl.click();
                    openAfterExec(true);
                } else if(condupl == true) {
                    downlarch.style.display = "none";
                    identcomp();
                }
            }
        } function returnFunct() {
            if(execCompCond == false) {
                openAfterExec(true);
            } else if(execCompCond == true) {
                countingReg(false);
                countingReg(true);
                gravation[gravation.length - 1] = new Array();
                timeGrav[timeGrav.length - 1] = new Array();
            }
        } var execCompCond = false; //---> "False" indica que uma composição não está sendo realizada; Pelo contrário, "true" indica que uma composição está sendo realizada e gravada!
        var deciseg = 0; //---> Décimo de segundo
        var seg = 0; //---> Segundos
        var min = 0; //---> Minutos
        var confirmCond = false; //---> "False" para mostrar o "confirm" toda vez que ativar a função "createComp"; "True" para evitar o respectivo "confirm" ao ativar a respectiva função!
        function countingReg(condexec) {
            if(condexec == false) {
                min = 0;
                seg = 0;
                deciseg = 0;
                clearInterval(setIntRel);
                document.getElementById("cronomt").textContent = "00:00;00";
            } else if(condexec == true) {
                setIntRel = setInterval(function() {
                    var res = "";
                    deciseg = deciseg + 2;
                    if(deciseg == 100) {
                        deciseg = 0;
                        seg++;
                        if(seg == 60) {
                            seg = 0;
                            min++;
                        }
                    } if(min < 10) {
                        res += "0";
                    } res += min + ":";
                    if(seg < 10) {
                        res += "0";
                    } res += seg + ";";
                    if(deciseg < 10) {
                        res += "0";
                    } res += deciseg;
                    document.getElementById("cronomt").textContent = res;
                    if(min == 74) {
                        alert("Você atingiu o seu limite de gravação de setenta e quatro minutos... portanto, a gravação será encerrada aqui!");
                        countingReg(false);
                        gravarComp();
                    }
                }, 20);
            }
        } function armazMusic(valor1, valor2, valor3, condarray) {
            var newArrayTime;
            var newArrayNota;
            if(condarray == true) {
                newArrayTime = [valor2[0]];
                newArrayNota = [new Array()];
                for(var b = 1; b < valor2.length; b++) {
                    if(Math.abs(valor2[b - 1] - valor2[b]) > 10) {
                        newArrayTime.push(valor2[b]);
                    }
                } var count = 0;
                for(var c = 0; c < valor3.length; c++) {
                    if(Math.abs(newArrayTime[count] - valor2[c]) > 10) {
                        newArrayNota.push(new Array());
                        count++;
                    } newArrayNota[newArrayNota.length - 1].push(valor3[c]);
                }
            } else if(condarray == false) {
                newArrayTime = valor2;
                newArrayNota = valor3;
            } nomegrav.push(valor1); //---> Nome
            timeGrav[timeGrav.length - 1] = newArrayTime; //---> Tempo
            gravation[gravation.length - 1] = newArrayNota; //---> Nota
            var optcompvar = document.createElement("option");
            optcompvar.value = valor1;
            document.getElementById("complist").appendChild(optcompvar);
            openAfterExec(false);
        } function createComp() {
            if(execCompCond == false) {
                timeGrav.push(new Array());
                gravation.push(new Array());
                if(confirmCond == false) {
                    var mensagemConf = confirm("Você está inicializando uma nova gravação. A máxima duração de uma gravação é de setenta e quatro minutos, portanto fique antenado no tempo!\n\n - Se desejar mostrar esta mensagem ao novamente clicar o 'play', clique em OK ou pressione Enter!\n - Caso contrário, clique em Cancelar e ela não será mostrada nunca mais (Esta ação NÃO poderá ser revertida)!");
                    touchMe.style.display = "none";
                    if(mensagemConf == false) { //---> Quando clicar em Cancelar
                        confirmCond = true;
                    }
                } execCompCond = true;
                document.getElementById("imgPlay").src = "https://image.flaticon.com/icons/png/512/440/premium/440815.png";
                startcomp.style.display = "none";
                downlarch.style.display = "none";
                uparch.style.display = "none";
                deletarcomp.style.display = "inline";
                spandelet.title = "Abortar execução da gravação!";
                trashcomp.style.display = "none";
                alternname.style.display = "none";
                returnicon.style.display = "inline";
                compositprop.style.display = "none";
                telaImg.src = "";
                musicSelect.style.display = "none";
                cifraM.style.display = "none";
                pausecomp.style.display = "none";
                document.getElementById("spanplay").title = "Encerrar gravação!";
                countingReg(true);
            } else if(execCompCond == true) {
                returnGrav();
                gravarComp();
            }
        } var nomegrav = new Array();
        var gravation = new Array();
        var timeGrav = new Array();
        function openAfterExec(condappear) {
            uparch.style.display = "inline";
            returnicon.style.display = "none";
            if(condappear == false) {
                touchMe.style.display = "block";
                if(gravation.length > 0) {
                    startcomp.style.display = "inline";
                    downlarch.style.display = "inline";
                    compositprop.style.display = "inline";
                    deletarcomp.style.display = "inline";
                    spandelet.title = "Deletar uma composição!";
                    trashcomp.style.display = "inline";
                    alternname.style.display = "inline";
                }
            } else if(condappear == true) {
                condupload = false;
                imgPlay.style.display = "inline";
                startcomp.style.display = "inline";
                deletarcomp.style.display = "inline";
                compositprop.value = "";
                compositprop.focus();
            }
        } const othername = " Favor, insira um outro nome!";
        function verifNameComp(nameinput, condname) {
            var nameRes = "";
            var spaceCond = false;
            var spaceNameNum = 0;
            var nameExistCond = false;
            for(var p = 0; p < nameinput.length; p++) {
                if(nameinput.charAt(p) == " ") {
                    if(spaceCond == true) {
                        spaceNameNum++;
                        if(spaceNameNum == 1) {
                            nameRes += " ";
                        }
                    }
                } else if(nameinput.charAt(p) !== " ") {
                    spaceNameNum = 0;
                    if(spaceCond == false) {
                        spaceCond = true;
                    } nameRes += nameinput.charAt(p);
                } var spaceCondRest = false;
                for(var k = p + 1; k < nameinput.length; k++) {
                    if(nameinput.charAt(k) !== " ") {
                        spaceCondRest = true;
                    }
                } if(spaceCondRest == false) {
                    break;
                }
            } if(nameRes == "") {
                nameRes = "Sem nome";
            } for(var f = 0; f < nomegrav.length; f++) {
                if(nameRes.toUpperCase() == nomegrav[f].toUpperCase()) {
                    if(condname == undefined && f == valoraltn) {
                        alert("O nome inserido é exatamente o mesmo que está atualmente gravado para esta composição." + othername);
                    } else {
                        alert("Este nome já fora utilizado para denominar uma das composições." + othername);
                    } nameExistCond = true;
                    break;
                }
            } if(nameExistCond == false) {
                if(condname == false || condname == undefined) {
                    for(var a = 0; a < nameRes.length; a++) {
                        if(nameRes.charAt(a) == ";") {
                            alert("Você inseriu, pelo menos, um 'ponto e vírgula' no nome da composição, o que não está de acordo com a estrutura solicitado. Para evitar erros na hora de reproduzir a composição a partir de um arquivo de texto, evitamos a utilização deste ponto. Favor, troque para outro nome!");
                            break;
                        } else if(nameRes.charAt(a) !== ";" && a == nameRes.length - 1) {
                            var confirmName = confirm("Você tem certeza que este será o nome da nova composição? '" + nameRes + "'\n\n - Caso sim, clique em OK ou pressione Enter!\n - Contudo, se não, clique em Cancelar e reescreva um novo nome!");
                            if(confirmName == true) {
                                condNameComp = true;
                                if(condname == undefined) {
                                    nomegrav[valoraltn] = nameRes;
                                    complist.innerHTML = "";
                                    createOptions();
                                } else if(condname == false) {
                                    const timeGravFirst = timeGrav[timeGrav.length - 1][0];
                                    for(var i = 0; i < timeGrav[timeGrav.length - 1].length; i++) {
                                        timeGrav[timeGrav.length - 1][i] = timeGrav[timeGrav.length - 1][i] - timeGravFirst;
                                    } armazMusic(nameRes, timeGrav[timeGrav.length - 1], gravation[gravation.length - 1], true);
                                }
                            }
                        }
                    }
                } else if(condname == true) {
                    var confcondmain = confirm("Música importada com sucesso para esta página! Desejas executar AGORA esta mesma música?\n\n - Se sim, clique em OK ou pressione Enter!\n - Caso contrário, clique em Cancelar!");
                    compositprop.value = "";
                    compositprop.focus();
                    timeGrav.push("");
                    gravation.push("");
                    for(var e = 0; e < timeNota.length; e++) {
                        timeNota[e] = parseFloat(timeNota[e]);
                    } armazMusic(nameRes, timeNota, allSeqNota, false);
                }
            }
        } var condNameComp;
        const observatname = "\n\n - Nota #1: se nenhum dado for inserido, a composição será denominada como 'Sem nome'!\n - Nota #2: não insira 'ponto e vírgula' no nome!";
        const opsalert = "OPS! O valor inserido no campo abaixo não corresponde a nenhuma composição já gravada. Favor, selecione uma das opções disponíveis clicando nele!";
        function gravarComp() {
            if(timeGrav[timeGrav.length - 1].length == 0) {
                alert("Nenhuma nota foi gravada aqui. Portanto, este trecho não será armazenado na sua lista de composições!");
                openAfterExec(false);
            } else {
                condNameComp = false;
                do {
                    var nameComp = prompt("Você terminou de gravar uma composição. Favor, se quiser manter ela, insira um nome para a composição gravada e clique em OK (ou pressione Enter). Se quiser descartar completamente a composição, clique em Cancelar!" + observatname);
                    if(nameComp == null) {
                        alert("Composição descartada com sucesso... Tente outras gravações!");
                        timeGrav.splice(timeGrav.length - 1, 1);
                        gravation.splice(gravation.length - 1, 1);
                        openAfterExec(false);
                        break;
                    } else if(nameComp !== null) {
                        verifNameComp(nameComp, false);
                    }
                } while(condNameComp == false);
            }
        } function deletMusic(newval) {
            if(execCompCond == false) {
                var condnomegrav = false;
                for(var m = 0; m < nomegrav.length; m++) {
                    if(nomegrav[m].toUpperCase() == newval.toUpperCase()) {
                        var confexcl = confirm("Desejas mesmo excluir esta composição? Observação: esta ação NÃO poderá ser refeita de jeito nenhum!\n\n - Se sim, clique em OK ou pressione Enter!\n - Caso contrário, clique em Cancelar!");
                        if(confexcl == true) {
                            nomegrav.splice(m, 1);
                            timeGrav.splice(m, 1);
                            gravation.splice(m, 1);
                            complist.innerHTML = "";
                            if(nomegrav.length == 0) {
                                startcomp.style.display = "none";
                                downlarch.style.display = "none";
                                returnicon.style.display = "none";
                                trashcomp.style.display = "none";
                                alternname.style.display = "none";
                                deletarcomp.style.display = "none";
                                compositprop.style.display = "none";
                            } else if(nomegrav.length > 0) {
                                createOptions();
                            }
                        } else if(confexcl == false) {
                            alert("Ação desfeita!");
                        } condnomegrav = true;
                        break;
                    }
                } if(condnomegrav == false) {
                    alert(opsalert);
                }  compositprop.value = "";
                compositprop.focus();
            } else if(execCompCond == true) {
                timeGrav.splice(timeGrav.length - 1, 1);
                gravation.splice(gravation.length - 1, 1);
                deletarcomp.style.display = "none";
                returnGrav();
                openAfterExec(false);
            }
        } var valoraltn;
        function alternNameComp() {
            for(var g = 0; g < nomegrav.length; g++) {
                if(nomegrav[g].toUpperCase() == compositprop.value.toUpperCase()) {
                    condNameComp = false;
                    valoraltn = g;
                    do {
                        var newname = prompt("Você selecionou a composição de nome '" + nomegrav[g] + "' para modificar seu respectivo nome. Insira abaixo qual o nome que irá ser substituído:" + observatname);
                        verifNameComp(newname, undefined);
                    } while(condNameComp == false);
                    compositprop.value = "";
                    compositprop.focus();
                    return;
                }
            } alert(opsalert);
            compositprop.value = "";
            compositprop.focus();
        } function mudarImg(newcond) {
            if(execCompCond == true) {
                if(newcond == false) { //---> onmouseout (Quando o mouse estiver fora do respectivo objeto)!
                    document.getElementById("imgPlay").src = "https://image.flaticon.com/icons/png/512/440/premium/440815.png";
                } else if(newcond == true) { //---> onmouseover (Quando o mouse estiver sobre o respectivo objeto)!
                    document.getElementById("imgPlay").src = "https://cdn.icon-icons.com/icons2/1154/PNG/512/1486564399-close_81512.png";
                }
            }
        } function createOptions() {
            for(var g = 0; g < nomegrav.length; g++) {
                var optcomp = document.createElement("option");
                optcomp.value = nomegrav[g];
                document.getElementById("complist").appendChild(optcomp);
            }
        } function returnGrav() {
            execCompCond = false;
            document.getElementById("imgPlay").src = "https://image.flaticon.com/icons/png/512/240/240784.png";
            document.getElementById("spanplay").title = "Gravar uma nova composição!";
            countingReg(false);
        } function limparCampo(newid) {
            document.getElementById(newid).value = "";
            document.getElementById(newid).focus()
        }
    </script>
</html>
